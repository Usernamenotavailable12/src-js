function closeBetpoolBetslipModal(){document.getElementById("bp-popup-content").innerHTML="",document.querySelector("[data-modal-betpool]").close()}function showData(e,t){var n=document.getElementById("bp-popup-content");n.innerHTML="";var a=document.createElement("div");a.className="bp-toggle-container",["ALL","OPEN","WON","LOST"].forEach((function(n){var o=document.createElement("button");o.classList.add("bp-all"),o.innerText=n,n===t&&o.classList.add("bp-active"),o.addEventListener("click",(function(){a.querySelectorAll("button").forEach((function(e){e.classList.remove("bp-active")})),o.classList.add("bp-active"),showData(e,n)})),a.appendChild(o)})),n.appendChild(a);var o=document.createElement("div");o.id="bp-main-container",n.appendChild(o);var s=document.createElement("div");s.id="bp-user-list-container",o.appendChild(s);var i=document.createElement("div");i.id="bp-detail-container",o.appendChild(i);var r={};e[t].forEach((function(e){e.data&&e.data.betslipConnection&&e.data.betslipConnection.edges&&e.data.betslipConnection.edges.forEach((function(e){var t=e.node,n=t.user.nickname;r[n]=r[n]||[],r[n].push(t)}))})),function(){s.innerHTML="",i.innerHTML="";var e=document.createElement("ul");for(var t in e.className="bp-user-list",r)!function(t){var n=document.createElement("li");n.innerText=t,n.addEventListener("click",(function(){i.innerHTML="";var e=r[t];if(e&&e.length)e.forEach((function(e){var t=document.createElement("betslipCard");t.classList.add(e.status.toLowerCase()),t.style.border="1px solid #ccc",t.style.borderRadius="5px",t.style.padding="10px",t.style.marginBottom="10px";var n=[];e.events&&e.events.length&&e.events.forEach((function(e){var t="";if(e.eventName&&(t+='<div class="marketEventWrapper"> <span class="bp-event-name">'+e.eventName+"</span>"),e.markets&&e.markets.length){var a=[];e.markets.forEach((function(e){e.name&&a.push('<div class="bp-market-inner-wrapper"> <span class="bp-market-name">'+e.name+'</span> <span class="bp-market-outcomes">'+e.outcomes[0].name+"</span> </div> </div>")})),a.length&&(t+=a.join(", "))}t&&n.push(t)}));var a=new Date(e.createdAt).toLocaleString(),o=n.length?n.join("<br>"):"N/A",s=parseFloat(e.odds)*parseFloat(e.stake),r='<div class="betslipCard" style="display:flex; flex-direction:column; gap:5px;">';r+='<div class="market">'+o+"</div>",r+='<div class="odds"><strong>კოეფიციენტი:</strong> '+e.odds+"</div>",r+='<div class="stake"><strong>ფსონი:</strong> '+e.stake+"</div>",r+='<div class="bet"><strong>მოგება:</strong> '+s.toFixed(2)+"₾</div>",r+='<div class="date"><strong>თარიღი:</strong> '+a+"</div>",r+="</div>",t.innerHTML=r,i.appendChild(t)}));else{var n=document.createElement("p");n.className="bp-no-images",n.innerText="No Betslip Found",i.appendChild(n)}})),e.appendChild(n)}(t);s.appendChild(e)}()}function openBetpoolBetslipModal(){var e=["OPEN","WON","LOST"],t=e.map((function(e){var t="https://api.samsara.ge/betslip?status="+e;return t+=-1===t.indexOf("?")?"?cachebuster="+(new Date).getTime():"&cachebuster="+(new Date).getTime(),fetch(t).then((function(e){return e.json()})).then((function(t){return{status:e,data:t}}))}));Promise.all(t).then((function(t){var n={};e.forEach((function(e){var a=t.find((function(t){return t.status===e}));n[e]=a?a.data:[]})),n.ALL=[],e.forEach((function(e){n.ALL=n.ALL.concat(n[e])})),showData(n,"ALL")})).catch((function(e){console.error("Error fetching data:",e)})),document.querySelector("[data-modal-betpool]").showModal()}