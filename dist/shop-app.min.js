window.loadShopItems=async function(){const e=document.getElementById("shop-container"),t=document.querySelector(".load-shop-button");t.disabled=!0,t.textContent="";try{const t=await fetchGraphQL('\n        query ShopItemConnection {\n          shopItemConnection(\n            shopItemCategoryId: "ycGrHNho6Y4cSh60pN3O",\n            orderBy: [\n              {\n                field: order,\n                direction: ASCENDING\n              }\n            ]\n          ) {\n            edges {\n              node {\n                price {\n                  value\n                }\n                description\n                id\n                contentId\n              }\n            }\n          }\n        }\n      ');if(t.errors)throw new Error(t.errors.map((e=>e.message)).join(", "));const n=t.data.shopItemConnection.edges.map((e=>e.node));e.innerHTML="",0===n.length?e.innerHTML="<p>No items available in this category.</p>":n.forEach((t=>{const n=function(e){const t=document.createElement("div");t.className=`shop-item ${e.contentId||"default-contentId"}`,t.setAttribute("data-id",e.id);const n=document.createElement("h3");n.className="description",n.textContent=e.description||"No description available.",t.appendChild(n);const o=document.createElement("button");return o.textContent=`${e.price.value} ❤️`,o.setAttribute("onclick",`window.handleBuy('${e.id}')`),t.appendChild(o),t}(t);e.appendChild(n)})),e.style.display="flex"}catch(e){console.error(e)}finally{t.disabled=!1,t.textContent=""}},window.handleBuy=async function(e){const t=document.querySelector(`.shop-item[data-id="${e}"]`),n=t.querySelector("button"),o=document.createElement("div");o.className="item-feedback";const s=n.previousElementSibling;s&&s.classList.contains("item-feedback")&&s.remove();try{const t={input:{shopItemIds:[e]}},n=await fetchGraphQL("\n        mutation PurchaseShopItems($input: PurchaseShopItemsInput!) {\n          purchaseShopItems(input: $input) {\n            shopTransaction {\n              userId\n              shopItems {\n                id\n              }\n            }\n          }\n        }\n      ",t);if(n.errors){const e=n.errors[0].message;"NOT_ENOUGH_MONEY"===e?(o.textContent="",o.style.color="red",o.classList.add("not-enough-money")):(o.textContent=`${e}`,o.style.color="red")}else o.textContent="",o.style.color="green",o.classList.add("purchase-successful")}catch(e){o.textContent=`${e.message}`,o.style.color="red",console.error(e)}t.insertBefore(o,n),setTimeout((()=>{o.parentNode&&o.remove()}),3e3)};