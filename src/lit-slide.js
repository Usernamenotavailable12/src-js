var u=Object.freeze,p=Object.defineProperty;var L=(n,t,e)=>t in n?p(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var h=(n,t,e)=>L(n,typeof t!="symbol"?t+"":t,e);var a=(n,t)=>u(p(n,"raw",{value:u(t||n.slice())}));function D(){import.meta.url,import("_").catch(()=>1),async function*(){}().next()}const{LitElement:k,html:o,css:$}=window.Lit;var g,m,v,f,b,S,w,y,x,E;class c extends k{constructor(){super(),this.lang=this.getQueryParam("lang","en"),this.page=this.getQueryParam("page","home"),this.slidesData=[],this.error=null,this.currentSlide=0,this.isDragging=!1,this.totalSlides=0,this.startX=0,this.currentTranslate=0,this.prevTranslate=0,this.autoSlideInterval=null,this.autoSlideIntervalTime=8e3,this.slideWidth=100,this.pxToVw=100/window.innerWidth,this.dragThreshold=20*this.pxToVw,this.slideChangeThreshold=100*this.pxToVw,this.retryAttempts=0,this.maxRetryAttempts=10}createRenderRoot(){const t=this.attachShadow({mode:"open"}),e=document.createElement("style");return e.textContent=this.constructor.styles.toString(),t.appendChild(e),t}connectedCallback(){super.connectedCallback(),this.fetchSlides().then(()=>{this.requestUpdate()}),this.startAutoSlide()}disconnectedCallback(){super.disconnectedCallback(),this.stopAutoSlide(),this.removeEventListeners()}updated(){var t;((t=this.slidesData)==null?void 0:t.length)>0&&this.setupEventListeners()}getQueryParam(t,e=""){return new URLSearchParams(window.location.search).get(t)||e}fixUrl(t){return t.replace(/ /g,"%20")}async fetchSlides(){var i;const t="https://api.takeshape.io/project/5da2b4d5-59f6-412a-82c3-f6a272b532be/production/graphql",e="dde685a904334d79915c7a9f31860f36";try{const s=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json","X-TakeShape-Token":e},body:JSON.stringify({query:"\n            query GetSlides($locale: String!) {\n              getSlideList(locale: $locale) {\n                items {\n                  caption\n                  pages\n                  sortOrder\n                  NavigateVar\n                  OptionalHref\n                  NavigateParams\n                  image {\n                    path\n                  }\n                  imageMobile {\n                    path\n                  }\n                }\n              }\n            }\n          ",variables:{locale:this.lang}})});if(!s.ok)throw new Error("HTTP error! Status: ".concat(s.status));const{data:r}=await s.json(),d=((i=r==null?void 0:r.getSlideList)==null?void 0:i.items)||[];this.slidesData=d.filter(l=>l.pages.includes(this.page)).sort((l,T)=>l.sortOrder-T.sortOrder),this.totalSlides=this.slidesData.length}catch(s){this.error=s.message}}setupEventListeners(){var i;const t=this.renderRoot.querySelector(".slides");if(!t){this.retryAttempts<this.maxRetryAttempts&&((i=this.slidesData)==null?void 0:i.length)>0&&(this.retryAttempts++,setTimeout(()=>this.setupEventListeners(),100));return}this.retryAttempts=0,this.removeEventListeners(),window.matchMedia("(pointer: coarse)").matches?(t.addEventListener("touchstart",this.dragStart.bind(this),{passive:!1}),t.addEventListener("touchmove",this.dragMove.bind(this),{passive:!1}),t.addEventListener("touchend",this.dragEnd.bind(this)),t.addEventListener("touchcancel",this.dragEnd.bind(this))):(t.addEventListener("pointerdown",this.dragStart.bind(this),{passive:!1}),t.addEventListener("pointermove",this.dragMove.bind(this),{passive:!1}),t.addEventListener("pointerup",this.dragEnd.bind(this)),t.addEventListener("pointercancel",this.dragEnd.bind(this)))}removeEventListeners(){const t=this.renderRoot.querySelector(".slides");t&&(t.removeEventListener("touchstart",this.dragStart.bind(this)),t.removeEventListener("touchmove",this.dragMove.bind(this)),t.removeEventListener("touchend",this.dragEnd.bind(this)),t.removeEventListener("touchcancel",this.dragEnd.bind(this)),t.removeEventListener("pointerdown",this.dragStart.bind(this)),t.removeEventListener("pointermove",this.dragMove.bind(this)),t.removeEventListener("pointerup",this.dragEnd.bind(this)),t.removeEventListener("pointercancel",this.dragEnd.bind(this)))}showSlide(t){const e=this.renderRoot.querySelector(".slides");e&&(e.style.transition="transform 0.5s ease",e.style.transform="translateX(".concat(-this.slideWidth*t,"vw)")),this.currentSlide=t,this.prevTranslate=-this.slideWidth*t,this.requestUpdate()}startAutoSlide(){this.stopAutoSlide(),this.autoSlideInterval=setInterval(()=>{const t=(this.currentSlide+1)%this.totalSlides;this.showSlide(t)},this.autoSlideIntervalTime)}stopAutoSlide(){this.autoSlideInterval&&(clearInterval(this.autoSlideInterval),this.autoSlideInterval=null)}dragStart(t){if(t.target.closest("a"))return;this.isDragging=!0,this.stopAutoSlide();const e=this.renderRoot.querySelector(".slides");e&&(e.style.transition="none"),t.type.startsWith("touch")?this.startX=t.touches[0].clientX:(this.startX=t.clientX,typeof t.pointerId<"u"&&(e==null||e.setPointerCapture(t.pointerId)))}dragMove(t){if(!this.isDragging)return;let e;t.type.startsWith("touch")?(e=t.touches[0].clientX,t.preventDefault()):e=t.clientX;const i=(e-this.startX)*this.pxToVw;this.currentTranslate=this.prevTranslate+i;const s=this.renderRoot.querySelector(".slides");s&&(s.style.transform="translateX(".concat(this.currentTranslate,"vw)"))}dragEnd(t){if(!this.isDragging)return;this.isDragging=!1;const e=this.renderRoot.querySelector(".slides");!t.type.startsWith("touch")&&typeof t.pointerId<"u"&&(e==null||e.releasePointerCapture(t.pointerId));let i;t.type.startsWith("touch")?i=t.changedTouches[0].clientX:i=t.clientX;const s=(i-this.startX)*this.pxToVw;if(Math.abs(s)<this.dragThreshold){const r=this.renderRoot.elementFromPoint(i,t.type.startsWith("touch")?t.changedTouches[0].clientY:t.clientY);r&&!r.closest("a")&&setTimeout(()=>r.click(),0)}else s<-this.slideChangeThreshold&&this.currentSlide<this.totalSlides-1?this.currentSlide++:s>this.slideChangeThreshold&&this.currentSlide>0&&this.currentSlide--;this.showSlide(this.currentSlide),this.startAutoSlide()}handleNavigate(t){if(!window.TMA||typeof window.TMA.navigate!="function"){console.warn("TMA.navigate is not available");return}const{NavigateVar:e,NavigateParams:i,OptionalHref:s}=t;try{if(i&&typeof i=="string"&&i.startsWith("game/")){const r=i.split("/");if(r.length===3&&r[1]&&r[2]){const[,d,l]=r;window.TMA.navigate("GAME",{gameStudio:d,gameSlug:l});return}}if(e&&e!=="NULL"&&e!=="null"){window.TMA.navigate(e);return}console.debug("No TMA navigation triggered, relying on OptionalHref:",s)}catch(r){console.error("Error processing navigation:",r)}}renderSlide(t){const e="https://www.ambassadoribet.com/_internal/ts-images/".concat(this.fixUrl(t.image.path)),i="https://www.ambassadoribet.com/_internal/ts-images/".concat(this.fixUrl(t.imageMobile.path)),s=o(v||(v=a(['\n      <div class="slide-content">\n        <picture>\n          <source media="(max-width: 768px)" srcset='," />\n          <img src=",' alt="Slide Image" loading="lazy" />\n        </picture>\n        ',"\n      </div>\n    "])),i,e,t.OptionalHref?o(m||(m=a(["\n              <a\n                href=","\n                aria-label=",'\n                draggable="false"\n                @click=',"\n              ></a>\n            "])),t.OptionalHref,t.caption||"Navigate to slide link",r=>{window.location.href!==t.OptionalHref&&(window.location.href=t.OptionalHref)}):"");return o(S||(S=a(['\n      <div class="slide">\n        ',"\n      </div>\n    "])),t.OptionalHref?o(f||(f=a(["",""])),s):o(b||(b=a(["\n              <div @click=",">\n                ","\n              </div>\n            "])),()=>this.handleNavigate(t),s))}render(){return this.error?o(w||(w=a(['\n        <div class="error-message">\n          <p>Error fetching slides: ',"</p>\n        </div>\n      "])),this.error):!this.slidesData||this.slidesData.length===0?o(y||(y=a(['\n        <div class="no-slides-message">\n          <p></p>\n        </div>\n      ']))):o(E||(E=a(['\n      <div class="carousel">\n        <div class="counter">'," / ",'</div>\n        <div class="slides" style="width: ','vw">\n          ','\n        </div>\n        <button\n          class="nav-button prev"\n          @click=','\n          aria-label="Previous slide"\n        >\n          ❮\n        </button>\n        <button\n          class="nav-button next"\n          @click=','\n          aria-label="Next slide"\n        >\n          ❯\n        </button>\n        <div class="indicators">\n          ',"\n        </div>\n      </div>\n    "])),this.currentSlide+1,this.totalSlides,this.slideWidth*this.totalSlides,this.slidesData.map(t=>this.renderSlide(t)),()=>{const t=this.currentSlide===0?this.totalSlides-1:this.currentSlide-1;this.showSlide(t),this.startAutoSlide()},()=>{const t=(this.currentSlide+1)%this.totalSlides;this.showSlide(t),this.startAutoSlide()},this.slidesData.map((t,e)=>o(x||(x=a(["\n              <span\n                class=","\n                @click=","\n              ></span>\n            "])),"indicator-dot ".concat(e===this.currentSlide?"active":""),()=>{this.showSlide(e),this.startAutoSlide()})))}}h(c,"properties",{lang:{type:String,reflect:!0},page:{type:String,reflect:!0},slidesData:{type:Array,state:!0},error:{type:String,state:!0},currentSlide:{type:Number,state:!0},isDragging:{type:Boolean,state:!0},totalSlides:{type:Number,state:!0}}),h(c,"styles",$(g||(g=a(["\n    @font-face {\n      font-family: \"Noto Sans Ambassadori\";\n      font-style: normal;\n      font-display: swap;\n      src: url(https://usernamenotavailable12.github.io/Font-Repository/NotoSansAmbassadori-Regular.ttf);\n    }\n\n    :host {\n      display: block;\n      margin: 0;\n      padding: 0;\n    }\n\n    .carousel {\n      width: 100vw;\n      margin: auto;\n      position: relative;\n      overflow: hidden;\n      user-select: none;\n    }\n\n    @media (max-width: 768px) {\n      .carousel {\n        width: 100vw;\n        border-radius: 10px;\n        scale: 0.95;\n      }\n      .slide {\n        min-width: 50vw;\n      }\n    }\n\n    .slides {\n      display: flex;\n      transition: transform 0.5s ease;\n      will-change: transform;\n    }\n\n    .slide {\n      min-width: 100vw;\n      box-sizing: border-box;\n      text-align: center;\n      position: relative;\n      cursor: grab;\n    }\n\n    .slide img {\n      width: 100%;\n      height: auto;\n      display: block;\n      user-drag: none;\n      -webkit-user-drag: none;\n      user-select: none;\n      -moz-user-select: none;\n      -webkit-user-select: none;\n      -ms-user-select: none;\n    }\n\n    .caption {\n      margin-top: 10px;\n      font-size: 1.2em;\n    }\n\n    .nav-button {\n      position: absolute;\n      top: 50%;\n      transform: translateY(-50%);\n      background: rgba(0, 0, 0, 0.4);\n      color: white;\n      border: none;\n      padding: 10px;\n      cursor: pointer;\n      z-index: 10;\n      border-radius: 5px;\n    }\n\n    .prev {\n      left: 10px;\n    }\n\n    .next {\n      right: 10px;\n    }\n\n    .slide a {\n      position: absolute;\n      top: 50%;\n      left: 50%;\n      transform: translate(-50%, -50%);\n      width: 50%;\n      height: 50%;\n      z-index: 10;\n      text-decoration: none;\n      color: transparent;\n      cursor: pointer;\n      pointer-events: auto;\n      user-drag: none;\n      -webkit-user-drag: none;\n      -moz-user-drag: none;\n      -ms-user-drag: none;\n      draggable: false;\n      touch-action: auto;\n    }\n\n    .slide a:hover,\n    .slide a:active {\n      pointer-events: auto;\n    }\n\n    @media (max-width: 768px) {\n      .carousel img {\n        height: 220px;\n        object-fit: cover;\n      }\n      .slide a {\n        width: 60%;\n        height: 60%;\n      }\n    }\n    picture {\n      position: relative;\n      z-index: 1;\n    }\n\n    .indicators {\n      position: absolute;\n      bottom: 5%;\n      width: 100%;\n      text-align: center;\n      z-index: 100;\n    }\n\n    .indicator-dot {\n      display: inline-block;\n      width: 20px;\n      height: 2px;\n      background-color: rgba(255, 255, 255, 0.5);\n      border-radius: 0;\n      margin: 0 5px;\n      cursor: pointer;\n      transition: background-color 0.3s;\n    }\n\n    .indicator-dot.active {\n      background-color: rgba(255, 255, 255, 1);\n    }\n\n    .counter {\n      position: absolute;\n      top: 5%;\n      right: 3%;\n      background: #0000005e;\n      color: white;\n      padding: 11px 16px;\n      border-radius: 42px;\n      z-index: 100;\n      font-family: 'Noto Sans Ambassadori';\n      font-size: 14px;\n      border: 1px solid rgba(255, 255, 255, 0.2);\n    }\n\n    @media (max-width: 768px) {\n      .counter {\n        font-size: 10px;\n        padding: 7px 10px;\n        background: #00000091;\n        right: 10px;\n      }\n      .indicator-dot {\n        width: 13px;\n      }\n    }\n\n    .slide-content {\n      position: relative;\n      width: 100%;\n      height: 100%;\n    }\n  "]))));customElements.define("image-carousel",c);export{D as __vite_legacy_guard};
//# sourceMappingURL=image-carousel.js.map
